import{h as Y,y as z,P as H,g as K,a3 as Q,d as X,a4 as Z,a5 as g,D as b,o as s,b as m,w,F as D,m as o,n as ee,r as le,M as R,E as W,c as T,t as j,a as G,J as te,a0 as ae,_ as oe}from"./framework.d3e9wyiU.js";import{_ as ne}from"./EnhancedElForm.vue_vue_type_style_index_0_scoped_d8a0c645_lang.qRrHKohl.js";import{E as re}from"./index.SJefeE_9.js";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const se=u=>typeof u<"u";function de(u){return JSON.parse(JSON.stringify(u))}function ue(u,p,N,f={}){var $,V,v;const{clone:h=!1,passive:I=!1,eventName:y,deep:x=!1,defaultValue:J,shouldEmit:E}=f,a=Q(),d=N||(a==null?void 0:a.emit)||(($=a==null?void 0:a.$emit)==null?void 0:$.bind(a))||((v=(V=a==null?void 0:a.proxy)==null?void 0:V.$emit)==null?void 0:v.bind(a==null?void 0:a.proxy));let c=y;p||(p="modelValue"),c=c||`update:${p.toString()}`;const i=r=>h?typeof h=="function"?h(r):de(r):r,U=()=>se(u[p])?i(u[p]):J,B=r=>{E?E(r)&&d(c,r):d(c,r)};if(I){const r=U(),F=Y(r);let C=!1;return z(()=>u[p],k=>{C||(C=!0,F.value=i(k),H(()=>C=!1))}),z(F,k=>{!C&&(k!==u[p]||x)&&B(k)},{deep:x}),F}else return K({get(){return U()},set(r){B(r)}})}const pe=X({__name:"EnhancedElForm",props:{modelValue:{},schema:{},labelWidth:{default:""},canEditing:{type:Boolean},isInline:{type:Boolean},enterSearch:{type:Function,default:()=>{}},labelPosition:{default:"right"},disabled:{type:Boolean},alwaysEditableColumns:{default:()=>[]}},emits:["update:modelValue"],setup(u,{expose:p,emit:N}){const f=u,$=N,{schema:V,canEditing:v,labelWidth:h,isInline:I,enterSearch:y,labelPosition:x,disabled:J,alwaysEditableColumns:E}=Z(f),a=ue(f,"modelValue",$),d=g(new Set),c=Y(!1),i=Y(),U=t=>t.render?t.render(a):"";E.value.forEach(t=>d.add(t)),z(()=>f.schema,t=>{if(t)for(let l=0;l<t.length;l++){const S=t[l],{prop:_,defaultValue:M=""}=S;a.value.hasOwnProperty(_)||(a.value[_]=M)}},{immediate:!0});const B=K(()=>v.value?V.value.map(l=>{const{prop:S,type:_}=l;return _&&!d.has(S)&&l.type!=="slot"?ne.omit(l,"type"):l}):V.value),r=()=>{var t;c||(t=y.value)==null||t.call(y)},F=t=>{d.add(t)};return p({editingColumn:d,clearEditingColumn:t=>{t?d.delete(t):(d.clear(),E.value.forEach(l=>d.add(l)))},validate:(...t)=>{var l;return(l=i.value)==null?void 0:l.validate(...t)},resetFields:(...t)=>{var l;return(l=i.value)==null?void 0:l.resetFields(...t)},validateField:(...t)=>{var l;return(l=i.value)==null?void 0:l.validateField(...t)},scrollToField:t=>{var l;return(l=i.value)==null?void 0:l.scrollToField(t)},clearValidate:(...t)=>{var l;return(l=i.value)==null?void 0:l.clearValidate(...t)}}),(t,l)=>{const S=b("el-option"),_=b("el-select"),M=b("el-radio"),L=b("el-radio-group"),q=b("el-date-picker"),A=b("el-form-item");return s(),m(o(re),{ref_key:"enhancedElFormRef",ref:i,class:"enhanced-el-form",inline:o(I),model:o(a),"label-width":o(h),disabled:o(J),"label-position":o(x),onKeyup:l[0]||(l[0]=ae(e=>typeof o(y)=="function"?r():()=>{},["enter"])),onCompositionstart:l[1]||(l[1]=e=>c.value=!0),onCompositionend:l[2]||(l[2]=e=>c.value=!1)},{default:w(()=>[(s(!0),T(D,null,W(B.value,e=>(s(),m(A,{key:e.prop,rules:e.rules,label:e.label||"",prop:e.prop,class:ee(`clazz-${e.prop} ${o(v)&&!e.type?"curosr-pointer":""}`),onClick:O=>o(v)&&F(e.prop)},{default:w(()=>{var O;return[e.type==="slot"?le(t.$slots,`form-${e.prop}`,{key:0,config:e,isEditing:d.has(e.prop)},void 0,!0):typeof e.render=="function"?(s(),m(U,{key:1,render:e.render},null,8,["render"])):e.type==="select"?(s(),m(_,R({key:2},e.attrs?e.attrs:{},{modelValue:o(a)[e.prop],"onUpdate:modelValue":n=>o(a)[e.prop]=n,onChange:n=>e.change?e.change(n,o(a)):()=>{}}),{default:w(()=>[(s(!0),T(D,null,W(e.options,(n,P)=>(s(),m(S,{key:P,value:typeof n=="object"?n.value:n,label:typeof n=="object"?n.label:n},null,8,["value","label"]))),128))]),_:2},1040,["modelValue","onUpdate:modelValue","onChange"])):e.type==="radio"?(s(),m(L,{key:3,modelValue:o(a)[e.prop],"onUpdate:modelValue":n=>o(a)[e.prop]=n},{default:w(()=>[(s(!0),T(D,null,W(e.options,(n,P)=>(s(),m(M,{key:P,label:n.value},{default:w(()=>[G(j(n.label),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):e.type==="datepicker"?(s(),m(q,R({key:4,modelValue:o(a)[e.prop],"onUpdate:modelValue":n=>o(a)[e.prop]=n,"value-format":"YYYY-MM-DD"},e.attrs),null,16,["modelValue","onUpdate:modelValue"])):e.type?(s(),m(te(`el-${e.type}`),R({key:5,modelValue:o(a)[e.prop],"onUpdate:modelValue":n=>o(a)[e.prop]=n},e.attrs),null,16,["modelValue","onUpdate:modelValue"])):(s(),T(D,{key:6},[G(j(((O=e.formater)==null?void 0:O.call(e,o(a)[e.prop]))||o(a)[e.prop]),1)],64))]}),_:2},1032,["rules","label","prop","class","onClick"]))),128))]),_:3},8,["inline","model","label-width","disabled","label-position"])}}}),fe=oe(pe,[["__scopeId","data-v-d8a0c645"]]);export{fe as E};
