import{_ as U}from"./EnhancedElForm.vue_vue_type_style_index_0_scoped_44debdb1_lang.wgXNkBJe.js";import{_ as B,D as n,o as r,b as d,w as i,F as u,n as I,r as f,M as y,E as _,c as h,t as k,a as V,J as L,a0 as j}from"./framework.d6yNje-4.js";const M={name:"enhancedElForm",props:{model:Object,schema:Array,labelWidth:String,canEditing:Boolean,isInline:{type:Boolean},enterSearch:Function,labelPosition:{type:String,default:"right",validator:t=>["right","left","top"].includes(t)},disabled:{type:Boolean}},data(){return{editingColumn:new Set([]),compositionStart:!1}},mounted(){const t=["validate","resetField","clearValidate"],a=this.$refs.enhancedElForm;t.forEach(l=>this[l]=a[l])},components:{LbRender:{name:"LbRender",functional:!0,props:{scope:Object,render:Function},render:(t,a)=>a.props.render?a.props.render(t,a.props.scope):""}},watch:{schema:{handler(t){if(t)for(let a=0;a<t.length;a++){const l=t[a],{prop:s,defaultValue:p=""}=l;s in this.model||(this.model[s]=p)}},immediate:!0,deep:!0}},computed:{processedSchema(){return this.canEditing?this.schema.map(a=>{const{prop:l,type:s}=a;if(!s)return a;if(this.editingColumn.has(l))s==="number"&&typeof this.model[l]=="string"&&(this.model[l]=parseInt(this.model[l].replace(/,/g,""),10));else return U.omit(a,"type");return a}):this.schema}},methods:{formSubmit(){this.compositionStart||this.enterSearch()},clickFormItem(t){this.editingColumn.add(t)},clearEditingColumn(t){t?this.editingColumn.delete(t):this.editingColumn.clear()},handleDisabled(t=!1){return typeof t=="function"?t():t}}};function R(t,a,l,s,p,m){const S=n("LbRender"),C=n("el-option"),v=n("el-select"),E=n("el-radio"),z=n("el-radio-group"),F=n("el-date-picker"),w=n("el-form-item"),D=n("el-form");return r(),d(D,{ref:"enhancedElForm",class:"enhanced-el-form",inline:l.isInline,model:l.model,"label-width":l.labelWidth,disabled:l.disabled,"label-position":l.labelPosition,onKeyup:a[0]||(a[0]=j(e=>typeof l.enterSearch=="function"?m.formSubmit():()=>{},["enter"])),onCompositionstart:a[1]||(a[1]=e=>p.compositionStart=!0),onCompositionend:a[2]||(a[2]=e=>p.compositionStart=!1)},{default:i(()=>[(r(!0),h(u,null,_(m.processedSchema,e=>(r(),d(w,{key:e.prop,rules:e.rules,label:e.label||"",prop:e.prop,class:I(`clazz-${e.prop} ${l.canEditing&&!e.type?"curosr-pointer":""}`),onClick:c=>l.canEditing&&m.clickFormItem(e.prop)},{default:i(()=>{var c;return[e.type==="slot"?f(t.$slots,`form-${e.prop}`,{key:0,config:e,model:l.model},void 0,!0):typeof e.render=="function"?(r(),d(S,{key:1,scope:l.model,render:e.render},null,8,["scope","render"])):e.type==="select"?(r(),d(v,y({key:2},e.attrs?e.attrs:{},{style:e.style,size:e.size?e.size:"large",modelValue:l.model[e.prop],"onUpdate:modelValue":o=>l.model[e.prop]=o,disabled:m.handleDisabled(e.disabled),placeholder:e.placeholder,onChange:o=>e.change?e.change(o,l.model):()=>{}}),{default:i(()=>[(r(!0),h(u,null,_(e.props.options,(o,b)=>(r(),d(C,{key:b,value:typeof o=="object"?o.value:o,label:typeof o=="object"?o.label:o},null,8,["value","label"]))),128))]),_:2},1040,["style","size","modelValue","onUpdate:modelValue","disabled","placeholder","onChange"])):e.type==="radio"?(r(),d(z,{key:3,modelValue:l.model[e.prop],"onUpdate:modelValue":o=>l.model[e.prop]=o},{default:i(()=>[(r(!0),h(u,null,_(e.props.options,(o,b)=>(r(),d(E,{key:b,label:o.value},{default:i(()=>[V(k(o.label),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(c=e.type)!=null&&c.includes("date")?(r(),d(F,y({key:4,modelValue:l.model[e.prop],"onUpdate:modelValue":o=>l.model[e.prop]=o,type:e.type,"value-format":"YYYY-MM-DD",size:e.size?e.size:"large",placeholder:e.placeholder,disabled:m.handleDisabled(e.disabled)},e.attrs),null,16,["modelValue","onUpdate:modelValue","type","size","placeholder","disabled"])):e.type?(r(),d(L(`el-${e.type}`),y({key:5,modelValue:l.model[e.prop],"onUpdate:modelValue":o=>l.model[e.prop]=o,disabled:m.handleDisabled(e.disabled)},e.attrs),null,16,["modelValue","onUpdate:modelValue","disabled"])):(r(),h(u,{key:6},[V(k(l.model[e.prop]),1)],64))]}),_:2},1032,["rules","label","prop","class","onClick"]))),128))]),_:3},8,["inline","model","label-width","disabled","label-position"])}const P=B(M,[["render",R],["__scopeId","data-v-44debdb1"]]);export{P as E};
